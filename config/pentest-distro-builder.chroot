#!/bin/sh

#Populate root's home folder from /etc/skel
cp -rv /etc/skel/. /root/

#Time to git stuff...
cd /root/
git clone https://github.com/Veil-Framework/Veil.git
git clone https://github.com/leebaird/discover.git
git clone https://github.com/trustedsec/ptf

ssh-keygen -t rsa -N "" -f ~/.ssh/id_rsa

#Enable our desired services
systemctl enable ssh
systemctl enable cups
systemctl enable apache2
systemctl enable mysql
systemctl enable postgresql
systemctl enable tor
systemctl enable cockpit.socket
systemctl enable xrdp
systemctl disable firewalld

#Allow VLC to run as root
sed -i 's/geteuid/getppid/' /usr/bin/vlc

#Distro-specific stuff
DISTRO=$(cat /etc/lsb-release | grep DISTRIB_ID | cut -c 12-30)

#Install VS Code extensions
codium --install-extension abusaidm.html-snippets --user-data-dir=~/.vscode-oss
codium --install-extension dbaeumer.vscode-eslint --user-data-dir=~/.vscode-oss
codium --install-extension ecmel.vscode-html-css --user-data-dir=~/.vscode-oss
codium --install-extension hookyqr.beautify --user-data-dir=~/.vscode-oss
codium --install-extension ms-azuretools.vscode-docker --user-data-dir=~/.vscode-oss
codium --install-extension ms-python.python --user-data-dir=~/.vscode-oss
codium --install-extension ms-vscode.cpptools --user-data-dir=~/.vscode-oss
codium --install-extension ms-vscode.csharp --user-data-dir=~/.vscode-oss
codium --install-extension ms-vscode.go --user-data-dir=~/.vscode-oss
codium --install-extension ms-vscode.powershell --user-data-dir=~/.vscode-oss
codium --install-extension rebornix.ruby --user-data-dir=~/.vscode-oss
codium --install-extension zignd.html-css-class-completion --user-data-dir=~/.vscode-oss

case $DISTRO in
Parrot)
#Stop ParrotSec from overwriting all our desktop customizations every time parrot-skel updates. >:-(
apt-mark hold parrot-skel
;;
Kali)
;;
esac

